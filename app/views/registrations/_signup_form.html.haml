-# Small hack to have a resource set when the user loads the form for the first time
-# For some reason `resource` is nil and then the labels won't be correct
- user = resource.nil? ? User.new : resource

= simple_form_for(user, :as => resource_name, :url => registration_path(resource_name), :html => { :class => 'form-inline single-column' }) do |f|
  = f.input :email, :required => true, :autofocus => true
  = f.input :_full_name, :required => true
  = f.input :username, :required => true, :wrapper => :prepend do
    = content_tag :span, webconf_path_prefix, :class => "add-on"
    = f.input_field :username

  - if @event_id
    = f.hidden_field :special_event_id, :value => @event_id

  = f.input :institution_name, :required => true
  = f.input :password, :required => true
  = f.input :password_confirmation, :required => true
  = f.button :wrapped, :value => t(".register")

  -# %div{ :class => @user.errors[:captcha].empty? ? 'captcha' : 'captcha field_with_errors' }
  -#   = show_simple_captcha(:object => :user)
